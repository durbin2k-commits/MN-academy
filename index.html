<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MN Academy - Student Management System</title>
    <link rel="stylesheet" href="style.css">
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <link href='https://cdn.jsdelivr.net/npm/fullcalendar@5.11.3/main.min.css' rel='stylesheet' />
</head>
<body>
    <!-- Login Page -->
    <div id="loginPage" class="page active">
        <div class="login-container">
            <div class="login-box">
                <div class="logo">
                    <i class='bx bxs-graduation'></i>
                    <h2>MN Academy</h2>
                </div>
                <p class="subtitle">Student Portal</p>
                
                <div class="login-tabs">
                    <button class="tab-btn active" onclick="switchTab('student')">Student Login</button>
                    <button class="tab-btn" onclick="switchTab('admin')">Admin Login</button>
                </div>

                <!-- Student Login Form -->
                <form id="studentLoginForm" class="login-form active" onsubmit="handleStudentLogin(event)">
                    <div class="input-group">
                        <i class='bx bx-link'></i>
                        <input type="text" id="accessLink" placeholder="Enter your access link" required>
                    </div>
                    <button type="submit" class="login-btn">Access Portal</button>
                </form>

                <!-- Admin Login Form -->
                <form id="adminLoginForm" class="login-form" onsubmit="handleAdminLogin(event)">
                    <div class="input-group">
                        <i class='bx bx-user'></i>
                        <input type="text" id="adminUsername" placeholder="Username" required>
                    </div>
                    <div class="input-group">
                        <i class='bx bx-lock'></i>
                        <input type="password" id="adminPassword" placeholder="Password" required>
                    </div>
                    <button type="submit" class="login-btn">Login as Admin</button>
                </form>
            </div>
        </div>
    </div>

    <!-- Admin Dashboard -->
    <div id="adminDashboard" class="page">
        <div class="dashboard">
            <nav class="sidebar">
                <div class="sidebar-header">
                    <i class='bx bxs-graduation'></i>
                    <h3>MN Academy</h3>
                </div>
                <ul class="sidebar-menu">
                    <li class="active" onclick="showAdminSection('students')">
                        <i class='bx bx-group'></i>
                        <span>Students</span>
                    </li>
                    <li onclick="showAdminSection('addStudent')">
                        <i class='bx bx-user-plus'></i>
                        <span>Add Student</span>
                    </li>
                    <li onclick="showAdminSection('calendar')">
                        <i class='bx bx-calendar'></i>
                        <span>Calendar</span>
                    </li>
                    <li onclick="showAdminSection('videos')">
                        <i class='bx bx-video'></i>
                        <span>Videos</span>
                    </li>
                    <li onclick="showAdminSection('messages')">
                        <i class='bx bx-message'></i>
                        <span>Messages</span>
                    </li>
                    <li onclick="showAdminSection('commonServer')">
                        <i class='bx bx-server'></i>
                        <span>Common Server</span>
                    </li>
                    <li onclick="logout()">
                        <i class='bx bx-log-out'></i>
                        <span>Logout</span>
                    </li>
                </ul>
            </nav>

            <main class="main-content">
                <!-- Students Section -->
                <div id="studentsSection" class="admin-section active">
                    <div class="section-header">
                        <h2>Students Management</h2>
                        <button class="add-btn" onclick="showAdminSection('addStudent')">
                            <i class='bx bx-plus'></i> Add New Student
                        </button>
                    </div>
                    <div class="students-grid" id="studentsGrid">
                        <!-- Students will be loaded here -->
                    </div>
                </div>

                <!-- Add Student Section -->
                <div id="addStudentSection" class="admin-section">
                    <h2>Add New Student</h2>
                    <form id="addStudentForm" onsubmit="addStudent(event)">
                        <div class="form-group">
                            <label>Student Name</label>
                            <input type="text" id="studentName" required>
                        </div>
                        <div class="form-group">
                            <label>Email</label>
                            <input type="email" id="studentEmail" required>
                        </div>
                        <div class="form-group">
                            <label>Class</label>
                            <select id="studentClass" required>
                                <option value="">Select Class</option>
                                <option value="Class 1">Class 1</option>
                                <option value="Class 2">Class 2</option>
                                <option value="Class 3">Class 3</option>
                                <option value="Class 4">Class 4</option>
                                <option value="Class 5">Class 5</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Roll Number</label>
                            <input type="text" id="studentRoll" required>
                        </div>
                        <div class="form-group">
                            <label>Parent's Phone</label>
                            <input type="tel" id="parentPhone" required>
                        </div>
                        <button type="submit" class="submit-btn">Create Student Profile</button>
                    </form>
                </div>

                <!-- Calendar Section -->
                <div id="adminCalendarSection" class="admin-section">
                    <h2>Academic Calendar</h2>
                    <div id="adminCalendar"></div>
                    <div class="event-form">
                        <h3>Add Event</h3>
                        <form onsubmit="addCalendarEvent(event)">
                            <input type="text" id="eventTitle" placeholder="Event Title" required>
                            <input type="date" id="eventDate" required>
                            <input type="time" id="eventTime" required>
                            <textarea id="eventDescription" placeholder="Event Description"></textarea>
                            <button type="submit">Add to Calendar</button>
                        </form>
                    </div>
                </div>

                <!-- Videos Section -->
                <div id="adminVideosSection" class="admin-section">
                    <h2>Video Management</h2>
                    <div class="video-upload">
                        <form onsubmit="uploadVideo(event)">
                            <input type="text" id="videoTitle" placeholder="Video Title" required>
                            <input type="url" id="videoUrl" placeholder="YouTube/Video URL" required>
                            <select id="videoClass" required>
                                <option value="">Select Class</option>
                                <option value="all">All Classes</option>
                                <option value="Class 1">Class 1</option>
                                <option value="Class 2">Class 2</option>
                                <option value="Class 3">Class 3</option>
                                <option value="Class 4">Class 4</option>
                                <option value="Class 5">Class 5</option>
                            </select>
                            <textarea id="videoDescription" placeholder="Video Description"></textarea>
                            <button type="submit">Upload Video</button>
                        </form>
                    </div>
                    <div class="video-list" id="videoList">
                        <!-- Videos will be loaded here -->
                    </div>
                </div>

                <!-- Messages Section -->
                <div id="adminMessagesSection" class="admin-section">
                    <h2>Send Message</h2>
                    <div class="message-form">
                        <form onsubmit="sendMessage(event)">
                            <select id="messageRecipient" required>
                                <option value="">Select Recipient</option>
                                <option value="all">All Students</option>
                                <!-- Students will be loaded here dynamically -->
                            </select>
                            <input type="text" id="messageSubject" placeholder="Subject" required>
                            <textarea id="messageContent" placeholder="Your message..." rows="5" required></textarea>
                            <button type="submit">Send Message</button>
                        </form>
                    </div>
                    <div class="sent-messages">
                        <h3>Sent Messages</h3>
                        <div id="sentMessagesList"></div>
                    </div>
                </div>

                <!-- Common Server Section -->
                <div id="commonServerSection" class="admin-section">
                    <h2>Common Server - Class Materials</h2>
                    <div class="upload-material">
                        <form onsubmit="uploadMaterial(event)">
                            <input type="text" id="materialTitle" placeholder="Material Title" required>
                            <select id="materialClass" required>
                                <option value="">Select Class</option>
                                <option value="all">All Classes</option>
                                <option value="Class 1">Class 1</option>
                                <option value="Class 2">Class 2</option>
                                <option value="Class 3">Class 3</option>
                                <option value="Class 4">Class 4</option>
                                <option value="Class 5">Class 5</option>
                            </select>
                            <input type="url" id="materialLink" placeholder="Material Link (Google Drive, etc.)">
                            <textarea id="materialDescription" placeholder="Material Description"></textarea>
                            <button type="submit">Upload Material</button>
                        </form>
                    </div>
                    <div class="materials-list" id="materialsList">
                        <!-- Materials will be loaded here -->
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- Student Dashboard -->
    <div id="studentDashboard" class="page">
        <div class="student-dashboard">
            <nav class="student-nav">
                <div class="nav-left">
                    <i class='bx bxs-graduation'></i>
                    <h2>MN Academy</h2>
                </div>
                <div class="nav-right">
                    <span id="studentName"></span>
                    <button onclick="logout()" class="logout-btn">
                        <i class='bx bx-log-out'></i>
                    </button>
                </div>
            </nav>

            <div class="student-content">
                <div class="student-sidebar">
                    <ul>
                        <li class="active" onclick="showStudentSection('profile')">
                            <i class='bx bx-user'></i> Profile
                        </li>
                        <li onclick="showStudentSection('calendar')">
                            <i class='bx bx-calendar'></i> Calendar
                        </li>
                        <li onclick="showStudentSection('materials')">
                            <i class='bx bx-book'></i> Class Materials
                        </li>
                        <li onclick="showStudentSection('videos')">
                            <i class='bx bx-video'></i> Videos
                        </li>
                        <li onclick="showStudentSection('messages')">
                            <i class='bx bx-message'></i> Messages
                        </li>
                    </ul>
                </div>

                <div class="student-main">
                    <!-- Profile Section -->
                    <div id="studentProfileSection" class="student-section active">
                        <div class="profile-card">
                            <div class="profile-header">
                                <i class='bx bxs-user-circle'></i>
                                <h2 id="profileName"></h2>
                                <p id="profileClass"></p>
                            </div>
                            <div class="profile-info">
                                <div class="info-item">
                                    <i class='bx bx-envelope'></i>
                                    <span id="profileEmail"></span>
                                </div>
                                <div class="info-item">
                                    <i class='bx bx-id-card'></i>
                                    <span id="profileRoll"></span>
                                </div>
                                <div class="info-item">
                                    <i class='bx bx-phone'></i>
                                    <span id="profileParentPhone"></span>
                                </div>
                                <div class="info-item">
                                    <i class='bx bx-link'></i>
                                    <span id="profileAccessLink"></span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Student Calendar Section -->
                    <div id="studentCalendarSection" class="student-section">
                        <h2>My Schedule</h2>
                        <div id="studentCalendar"></div>
                        <div class="upcoming-events" id="upcomingEvents">
                            <!-- Upcoming events will be shown here -->
                        </div>
                    </div>

                    <!-- Student Materials Section -->
                    <div id="studentMaterialsSection" class="student-section">
                        <h2>Class Materials</h2>
                        <div class="materials-grid" id="studentMaterials">
                            <!-- Materials will be loaded here -->
                        </div>
                    </div>

                    <!-- Student Videos Section -->
                    <div id="studentVideosSection" class="student-section">
                        <h2>Educational Videos</h2>
                        <div class="videos-grid" id="studentVideos">
                            <!-- Videos will be loaded here -->
                        </div>
                    </div>

                    <!-- Student Messages Section -->
                    <div id="studentMessagesSection" class="student-section">
                        <h2>Messages</h2>
                        <div class="messages-list" id="studentMessages">
                            <!-- Messages will be loaded here -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src='https://cdn.jsdelivr.net/npm/fullcalendar@5.11.3/main.min.js'></script>
    <script src="app.js"></script>
</body>
</html>
